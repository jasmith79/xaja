(function(d,g){switch(!0){case "object"===typeof module&&null!=module.exports:module.exports=g(d);break;case "function"===typeof define&&define.amd:define(g(d));break;default:d.xaja=g(d)}})(window?window:null,function(d){"function"!==typeof XMLHttpRequest&&require("xmlhttprequest");var g=function(a){var c=typeof a;switch(c){case "string":return a;case "object":return null===a?"":Object.keys(a).map(function(c){return encodeURIComponent(c)+"="+encodeURIComponent(a[c])}).join("&");default:return Error(c+
" is not a valid ajax parameter")}},k=function(a){switch(!0){case "string"!==typeof a:return Error("Invalid type "+typeof a+" in checkJSON");case 3>a.length:return Error("Empty JSON response");default:return JSON.parse(a)}};return{get:function(a,c,d){return new Promise(function(h,e){var f=null==c?"":"?"+g(c);if(f instanceof Error)return e(f),null;var b=new XMLHttpRequest;b.open("GET",a+f);b.onload=function(){if(400>b.status&&200<=b.status)if("string"===typeof d&&"json"===d.toLowerCase()){var a=k(b.responseText);
a instanceof Error?e(a):h(a)}else h(b.responseText);else e(Error("Server responded with a status of "+b.status));return null};b.onerror=function(){e(Error("Network Error"));return null};b.send();return null})},post:function(a,c,d){return new Promise(function(h,e){var f=null==c?"":g(c);if(f instanceof Error)return e(f),null;var b=new XMLHttpRequest;b.open("POST",a);b.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");b.onload=function(){if(400>b.status&&200<=b.status)if("string"===
typeof d&&"json"===d.toLowerCase()){var a=k(b.responseText);a instanceof Error?e(a):h(a)}else h(b.responseText);else e(Error("Server responded with a status of "+b.status));return null};b.onerror=function(){e(Error("Network Error"));return null};b.send(f);return null})},getJSON:function(a,c){return this.get(a,c,"json")}}});
