!function(t,e){if("function"==typeof define&&define.amd)define(["exports","js-typed","decorators-js","utils"],e);else if("undefined"!=typeof exports)e(exports,require("js-typed"),require("decorators-js"),require("utils"));else{var r={exports:{}};e(r.exports,t.jsTyped,t.decoratorsJs,t.utils),t.xaja=r.exports}}(this,function(t,e,r,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}Object.defineProperty(t,"__esModule",{value:!0}),t.toURLString=t.getJSON=t.post=t.get=void 0;var u=o(e),i=(o(r),o(n)),s=function(){function t(t,e){var r=[],n=!0,o=!1,u=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(a){o=!0,u=a}finally{try{!n&&s["return"]&&s["return"]()}finally{if(o)throw u}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=new Error("Sorry but we could not reach the server."),c=u.guard("string",function(t){var e=encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode("0x"+e)});return btoa(e)}),f=u.Dispatcher([[["string"],function(t){return encodeURIComponent(t)}],[["nil"],function(){return""}],[["object"],function(t){return Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")}]]),l=u.Dispatcher([[["nil"],function(){return[]}],[["object"],function(t){var e=Object.keys(t),r={},n="",o="",u="";return e.forEach(function(e){var u=t[e];e.match(/user/i)?n=u:e.match(/pass/i)?o=u:r[e]=u}),n&&(u="Basic "+c(n+":"+o)),[f(r),u]}]]);u.defType("__string+",function(t){return t&&u.isType("string",t)}),u.sumType("__string|object","string","object");var d=u.guard(1,["__string+","__string|object"],function(t,e){var r=e?l(e):[null,null],n=s(r,2),o=n[0],u=n[1];return new Promise(function(e,r){var n=t+(o?"?"+o:""),i=new XMLHttpRequest;i.open("GET",n),u&&i.setRequestHeader("Authorization",u),i.onload=function(){return i.status<400&&i.status>=200?(e(i.responseText),null):(r(new Error("Server responded with a status of "+i.status)),null)},i.onerror=function(){return r(a),null};try{i.send()}catch(s){r(s)}return null})}),p=u.guard(["__string+","object"],function(t,e){var r=l(e),n=s(r,2),o=(n[0],n[1]);return new Promise(function(r,n){var u=f(e),i=new XMLHttpRequest;i.open("POST",t),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),o&&i.setRequestHeader("Authorization",o),i.onload=function(){return i.status<400&&i.status>=200?(r(i.responseText),null):(n(new Error("Server responded with a status of "+i.status)),null)},i.onerror=function(){return n(a),null};try{i.send(u)}catch(s){n(s)}return null})}),y=function(t,e){return i.unpackJSON(e?d(t,e):d(t))};t.get=d,t.post=p,t.getJSON=y,t.toURLString=f});